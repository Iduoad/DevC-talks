---
title: CAP theorem
description: Analogy with a call center to introduce CAP theorem
type: talk
speaker: Abderrahim Ouakki
source: https://www.facebook.com/groups/DevC.Casablanca/permalink/1016943958707581/
tags:['Distributed-Systems','CAP-Theorem']
---
<div dir="rtl" align='right'>
    
من شحال هاذي و أنا تانسمع بCAP theorem و عمرني فهمتوا حتى شرحوا عبد الرحيم عاد بديت كانفهموا. 
https://www.facebook.com/groups/DevC.Casablanca/permalink/1016943958707581/
المهم قلبت شوية أكثر و قررت نحاول نشرحوا، باش تا أنا نزيد نفهموا شوية.
تخيل معايا عندك سونطر دابيل (call center) تايبيعوا معقم للناس للناس فيه بزاف ديال الموظفين مقسمين على 2 أنواع: 

    الناس لي كايجاوبوا على التيليوفون: كاينين بزاف متوزعين على السونطر، و الوظيفة ديالهم هي يجابوا على التيليفون و يقولوا الثمن ديال المعقم شحال ..
    كل واحد تايقدر يهضر مع لي قريب ليه. وهاكا كيفاش تايتواصلوا في حالة ايلا تبدل الثمن ديال المعقم.
    الشاف: هاذا هو لي تايقرر ثمن المعقم و تايجي تايقولوا للموظفين (و من تما تايتواصلوا بيناتهم باش كلشي يعرف الثمن الجديد)


دابا نعرفوا 3 ديال المبادئ
1. الAvailability
هذا باين، منين غاي نتصل بشي واحد في السنطر دابيل، ايلا كان في البوسط ديالوا خاصو يجاوبني ضروري مايمكنش يقطع عليا و لا يتعطل.
2. الConsistency
حتا هاذا باين،ايلا اتصلت بشي واحد في سونطر دابيل و قالي المعقم ب 10 الدراهم، و منين قطعت عاودت اتصلت بواحد آخر مختلف خاص يقولي تاهو 10 الدراهم
3. الPartition Tolerance
هاذي بكل بساطة، تاتكون محققة منين إيلا حيدنا أي موظف من الموظفين خاص كولشي يبقى خدام و بنفس الطريقة لي كان عليها. 

----

دابا نرجعوا للCAP Theorem لي تايقول أن هاذ المبادئ مستحيل يتجمعوا بثلاثة في السونطر دابيل ديالنا .. هنا عندنا 3 الحالات آجي نشوفوهم كاملين:
1. الPA
دابا نفترضوا بغينا أي واحد تاصلنا بيه يجاوب في الوقت، و في نفس الوقت بغينا ايلا حيدنا أي واحد كلشي يبقى كيفما كان.
نفترض أن أحمد كان جالس حدا خديجة و هي لي كانت تاتوصل ليه الخبار بأن الثمن تبدل كل مرة. 
واحد الوقيتة حيدنا خديجة و زدنا الثمن في نفس الوقت، و اتصلنا بأحمد: غادي يخاصوا يجاوب بالزز حيت A و ماخاسوش يبدل طريقة الخدمة ولا ينوض قبل مايوصلوا الجواب حيت P، هاذشي غادي يخليه عندو الثمن القديم. وهاذشي لي غادي يخلي السونطر دابيل ديالنا ماشي Consistent
2. الPC
باش الكليان ماياخدش الثمن غالط، و مانوقعوش في مشكل الحل الأول هو أحمد يقطع على الكليان (يعني مايجاوبوش) و يخليه يمشي يتاصل بشي حد آخر لي عندو المعلومة صحيحة أو يعاود يتاصل من بعد منين تجي خديجة. يعني هنا غادي نضحيو بAvailability مقابل Consistency
3. الAC
حل آخر، هو نردوا السونطر ديالنا ماشي Partition Tolerant يعني كلشي يخدم في دقة من 8 ل 12 و من 2 ل 6 و إيلا شي حد ناض من بلاصتو، يحبس كولشي .. 
و هاكا غادي نضمنوا للكليان ايلا اتصل بالسونطر ديالنا في أي وقت كنا خدامين فيه (يعني كلشي كان خدام) راغادي ياخد الثمن الحقيقي C و غادي يجاوبو شي حد في ساع A
هاذشي لي كاين، سمحوا لي هاذشي خرج طويل
https://mwhittaker.github.io/blog/an_illustrated_proof_of_the_cap_theorem/
https://en.wikipedia.org/wiki/CAP_theorem

</div>
