---
title: CAP theorem - part 2
description: Examples of the CAP theorem
type: talk
speaker: Abderrahim Ouakki
source: https://www.facebook.com/groups/DevC.Casablanca/permalink/1016943958707581/
tags: ['Distributed-Systems','CAP-Theorem']
---
ككمالة على ذاكشي ديال CAP Theorem حاولت نقلب على أمثلة باش داكشي يكون باين.
و لكن قبل هاذو شي استنتاجات مهمين:

1. الCAP theorem ماعندوش معنى في حالة الأنظمة لي ماشي موزعة Non Distributed Systems .. حيت في هاذ الحالة ماغاديش تكون عندنا P. و النظام ديالنا غادي يكون ديما CA على الأكثر.
2. ماشي بالضرورة، شي نظام يكون تايوفر غير زوج واحد ديال خاصيات، مستحيل يوفرهم بثلاثة في دقة، و لكن يقدر يكون في Modes و كل واحد تايوفر شي زوج. بحال MongoDB لي يقدر يكون CA و CP و AP على حساب كيفاش خدمناه:
https://stackoverflow.com/a/44440201/7554715
3. من الحوايج لي جاوني صعاب في الفهم هي Partition Tolerance .. حتى قريت هاذ المقال لي تايقول أننا مايمكنش نتفاداوها و الا غادي يخاص network ديالنا تكون خدامة دائما (بحال سونطر دابيل) أو ماتكونش، وهاذو بجوج ماشي واقعيين.
https://codahale.com/you-cant-sacrifice-partition-tolerance/
4. الCAP theorem ماتايعطيش تعاريف و معايير نقروا نحسبوا دقيقة لA و C و P .. و هاذشي تايبقى على متعلق بالنظام ديالنا و كيفاش حنا تانشوفوا الأمور.
هذا نقد واعد و مفصل للCAP theorem
https://martin.kleppmann.com/2015/05/11/please-stop-calling-databases-cp-or-ap.html

نبداو بالأمثلة:

- الRDBS أو SQL databases بحال Mysql و Postgres : هاذو تايكونوا غالبا CA by default .. و هاذشي جاي من أنهم Transactional و مبنيين على ACID principles لي في التصويرة.
منين تينشدوا شي SQL Database و تافرقوها (distribute)، منين تاينديروا شي عملية ديال القراية أو الكتابة في البيانات ديالنا، تاتدار Transaction يعني بزاف ديال العمليات متسلسلين و ايلا فشلات غير واحد تانديروا ماكاتدوزش (بحال البلان ديال كّيشي ديال البنكة). 
\ المثال ديال البنكة مهم، حيت شحال من مرة تانمشيو نجبدوا الفلوس تانلقاو الكّيشي ماخدامش و السبب هو في شي بلاصة كاين شي node ماخدامش. يعني تايضحيوا ب P قدام AC
يعني على قد فهمي، ايلا بغينا نصايبو سيستام ديال بنكة أو شي حاجة لي Transactional من الأفضل نختاروا شي حاجة AC بحال RDBS 
منين تايكونوا عندنا معلومات بزااااف، و غالبا ايلا بدلنا فيهم ماغاديش يلاحظوها بزاف ديال الناس، أو أن دوك المعلومات ماتانبدوهاش بزااف. هنا ممكن نتخلاو على C مقابل أن AP يبقاو. حيت المعلومات خاص يما يكونوا عندنا و خاص ايلا طاحت شيnode داكشي لاخر يكمل.
- هنا كاينين شي NoSQL DBS بحال Cassandra و حتا Mongo لي تايوفروا الإمكانية ديال أنهم يكونوا Highly Available and Partition Tolerant مقابل Consistency (ممكن يخدموا في modes آخرين شوف 3 و 4 الفوق)
https://www.datastax.com/blog/2019/05/how-apache-cassandratm-balances-consistency-availability-and-performance 
المثال لي بانلي هنا هو scraping data و SE لي ماشي بالضرورة تكون C و لكن ضروري A و C
يعني ايلا بغينا نصايبو شي نظام لي غادي يجمع بزاف ديال المعلومات و بغيناه يكون موجو ديما و متوزع مزيان ممكن نفرطوا في C
- و أخيرا، CP .. في الحالات لي الدقة ديال المعلومات C مهمة عندنا أكبر من التوفر ديالها A .. 
غالبا ال NoSQL Datastore بحال HBase و Redis و Etcd تايكونوا تايوفروا هاذ الmode (هاذشي ماتايمنعهمش يخدموا في modes آخرين) .. 
من اﻷمثلة لي طاحوا لي في بالي، هو configuration لي إلا كانت موزعة على بزاف يال datastores مستقلين بعني P غادي يخصنا ضروري نفس المعلومات لي كاينين في أي node يكون في جميع nodes لاخرين باش ماتتخربقش لينا الconfig مابين services ديالنا. في حين ممكن نتحملوا A .. بأننا نمشيو نقلبوا في Node آخر فينما مايجاوبش شي node .